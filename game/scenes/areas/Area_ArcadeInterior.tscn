[gd_scene load_steps=24 format=3]

[ext_resource type="Script" path="res://game/scripts/player/Player.gd" id="1"]
[ext_resource type="Script" path="res://game/scripts/interaction/ArcadeCabinetInteractable.gd" id="17"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/fae/overworld/fae_placeholder.png" id="2"]
[ext_resource type="PackedScene" path="res://game/scenes/ui/DialogueUI.tscn" id="3"]
[ext_resource type="Script" path="res://game/scripts/areas/SpawnMarker.gd" id="4"]
[ext_resource type="Script" path="res://game/scripts/areas/AreaTransition.gd" id="5"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_machine.png" id="6"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_cabinet_racing.png" id="7"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_cabinet_fighter.png" id="8"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_cabinet_puzzle.png" id="9"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_cabinet_shooter.png" id="10"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/arcade_counter.png" id="11"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/prize_shelf.png" id="12"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/stuffed_bunny.png" id="13"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/arcade/ticket_counter.png" id="14"]
[ext_resource type="Script" path="res://game/scripts/interaction/NPCDialogueTree.gd" id="15"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/npcs/arcade_owner/arcade_owner_idle_south.png" id="16"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1"]
size = Vector2(16, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_1"]
radius = 24.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2"]
size = Vector2(24, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_Cabinet"]
size = Vector2(16, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_Counter"]
size = Vector2(32, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_Shelf"]
size = Vector2(24, 32)

[sub_resource type="CircleShape2D" id="CircleShape2D_NPC"]
radius = 20.0

[node name="Area_ArcadeInterior" type="Node2D"]

[node name="Background" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 512.0
offset_bottom = 288.0
color = Color(0.12, 0.08, 0.18, 1)

[node name="Floor" type="ColorRect" parent="."]
offset_left = 40.0
offset_top = 60.0
offset_right = 472.0
offset_bottom = 260.0
color = Color(0.18, 0.12, 0.25, 1)

[node name="Walls" type="Node2D" parent="."]

[node name="WallLeft" type="ColorRect" parent="Walls"]
offset_left = 20.0
offset_top = 20.0
offset_right = 40.0
offset_bottom = 260.0
color = Color(0.22, 0.15, 0.30, 1)

[node name="WallRight" type="ColorRect" parent="Walls"]
offset_left = 472.0
offset_top = 20.0
offset_right = 492.0
offset_bottom = 260.0
color = Color(0.22, 0.15, 0.30, 1)

[node name="WallTop" type="ColorRect" parent="Walls"]
offset_left = 20.0
offset_top = 20.0
offset_right = 492.0
offset_bottom = 60.0
color = Color(0.22, 0.15, 0.30, 1)

[node name="NeonStripe1" type="ColorRect" parent="Walls"]
offset_left = 40.0
offset_top = 55.0
offset_right = 472.0
offset_bottom = 58.0
color = Color(0.9, 0.2, 0.6, 1)

[node name="NeonStripe2" type="ColorRect" parent="Walls"]
offset_left = 40.0
offset_top = 62.0
offset_right = 472.0
offset_bottom = 65.0
color = Color(0.2, 0.8, 0.9, 1)

[node name="ArcadeCabinets" type="Node2D" parent="."]

[node name="Cabinet1_Interactable" type="Area2D" parent="ArcadeCabinets"]
position = Vector2(80, 100)
script = ExtResource("17")
game_name = "Catch-A-Star"
minigame_scene = "res://game/scenes/minigame/ArcadeMinigame.tscn"
placeholder_text = ""

[node name="Sprite" type="Sprite2D" parent="ArcadeCabinets/Cabinet1_Interactable"]
texture = ExtResource("6")
centered = true

[node name="InteractionShape" type="CollisionShape2D" parent="ArcadeCabinets/Cabinet1_Interactable"]
shape = SubResource("CircleShape2D_1")

[node name="Cabinet2" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(120, 100)
texture = ExtResource("7")
centered = true

[node name="Cabinet3" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(160, 100)
texture = ExtResource("8")
centered = true

[node name="Cabinet4" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(200, 100)
texture = ExtResource("9")
centered = true

[node name="Cabinet5" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(280, 100)
texture = ExtResource("10")
centered = true

[node name="Cabinet6" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(320, 100)
texture = ExtResource("6")
centered = true

[node name="Cabinet7" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(360, 100)
texture = ExtResource("7")
centered = true

[node name="Cabinet8" type="Sprite2D" parent="ArcadeCabinets"]
position = Vector2(400, 100)
texture = ExtResource("8")
centered = true

[node name="CabinetCollisions" type="StaticBody2D" parent="ArcadeCabinets"]

[node name="Collision1" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(80, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision2" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(120, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision3" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(160, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision4" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(200, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision5" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(280, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision6" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(320, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision7" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(360, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="Collision8" type="CollisionShape2D" parent="ArcadeCabinets/CabinetCollisions"]
position = Vector2(400, 100)
shape = SubResource("RectangleShape2D_Cabinet")

[node name="CounterArea" type="Node2D" parent="."]
position = Vector2(420, 180)

[node name="Counter" type="Sprite2D" parent="CounterArea"]
position = Vector2(0, 0)
texture = ExtResource("11")
centered = true

[node name="CounterCollision" type="StaticBody2D" parent="CounterArea"]

[node name="Collision" type="CollisionShape2D" parent="CounterArea/CounterCollision"]
shape = SubResource("RectangleShape2D_Counter")

[node name="ArcadeOwner" type="Area2D" parent="."]
position = Vector2(420, 160)
script = ExtResource("15")
dialogue_branches = Array[String](["Welcome to Pixel Palace! I'm Buzz, the owner. We've got the best games in town!", "Looking to break some high scores? Our leaderboard is legendary! The top player gets their name up in lights.", "See that prize corner? Collect enough tickets and you can trade them for some awesome prizes! That stuffed bunny is a crowd favorite.", "Want to try one of our cabinets? Each one has a different challenge. The racing game is great for beginners!"])

[node name="Sprite" type="Sprite2D" parent="ArcadeOwner"]
texture = ExtResource("16")
centered = true

[node name="CollisionShape" type="CollisionShape2D" parent="ArcadeOwner"]
shape = SubResource("CircleShape2D_NPC")

[node name="PrizeCorner" type="Node2D" parent="."]
position = Vector2(80, 180)

[node name="PrizeShelf" type="Sprite2D" parent="PrizeCorner"]
position = Vector2(0, 0)
texture = ExtResource("12")
centered = true

[node name="StuffedBunny" type="Sprite2D" parent="PrizeCorner"]
position = Vector2(30, -10)
texture = ExtResource("13")
centered = true

[node name="TicketCounter" type="Sprite2D" parent="PrizeCorner"]
position = Vector2(30, 10)
texture = ExtResource("14")
centered = true

[node name="PrizeLabel" type="Label" parent="PrizeCorner"]
offset_left = -40.0
offset_top = -50.0
offset_right = 40.0
offset_bottom = -35.0
text = "Prize Corner"
horizontal_alignment = 1

[node name="ShelfCollision" type="StaticBody2D" parent="PrizeCorner"]

[node name="Collision" type="CollisionShape2D" parent="PrizeCorner/ShelfCollision"]
shape = SubResource("RectangleShape2D_Shelf")

[node name="Door" type="ColorRect" parent="."]
offset_left = 246.0
offset_top = 240.0
offset_right = 266.0
offset_bottom = 260.0
color = Color(0.35, 0.25, 0.45, 1)

[node name="DoorLabel" type="Label" parent="."]
offset_left = 220.0
offset_top = 255.0
offset_right = 292.0
offset_bottom = 270.0
text = "Exit â†“"
horizontal_alignment = 1

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(256, 200)
script = ExtResource("1")

[node name="Sprite" type="Sprite2D" parent="Player"]
texture = ExtResource("2")
centered = true

[node name="Collision" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_1")

[node name="Camera2D" type="Camera2D" parent="Player"]
enabled = true
position_smoothing_enabled = false

[node name="InteractionArea" type="Area2D" parent="Player"]

[node name="InteractionShape" type="CollisionShape2D" parent="Player/InteractionArea"]
shape = SubResource("CircleShape2D_1")

[node name="DialogueUI" parent="." instance=ExtResource("3")]

[node name="Spawns" type="Node2D" parent="."]

[node name="from_exterior" type="Marker2D" parent="Spawns"]
position = Vector2(256, 220)
script = ExtResource("4")
marker_id = "from_exterior"

[node name="default" type="Marker2D" parent="Spawns"]
position = Vector2(256, 180)
script = ExtResource("4")

[node name="from_minigame" type="Marker2D" parent="Spawns"]
position = Vector2(100, 140)
script = ExtResource("4")
marker_id = "from_minigame"

[node name="DoorTransition" type="Area2D" parent="."]
position = Vector2(256, 255)
script = ExtResource("5")
target_area = "res://game/scenes/areas/Area_Arcade.tscn"
target_spawn_id = "from_interior"

[node name="DoorShape" type="CollisionShape2D" parent="DoorTransition"]
shape = SubResource("RectangleShape2D_2")
