[gd_scene load_steps=15 format=3]

[ext_resource type="Script" path="res://game/scripts/player/Player.gd" id="1"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/fae/overworld/fae_placeholder.png" id="2"]
[ext_resource type="Script" path="res://game/scripts/interaction/Interactable.gd" id="3"]
[ext_resource type="PackedScene" path="res://game/scenes/ui/DialogueUI.tscn" id="4"]
[ext_resource type="Script" path="res://game/scripts/areas/SpawnMarker.gd" id="5"]
[ext_resource type="Script" path="res://game/scripts/areas/AreaTransition.gd" id="6"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/blacksmith/forge.png" id="7"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/blacksmith/anvil.png" id="8"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/blacksmith/weapon_rack.png" id="9"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/blacksmith/workbench.png" id="10"]
[ext_resource type="Script" path="res://game/scripts/interaction/NPCDialogueTree.gd" id="11"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/npcs/blacksmith/blacksmith_idle_south.png" id="12"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1"]
size = Vector2(16, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_1"]
radius = 24.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2"]
size = Vector2(32, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3"]
size = Vector2(16, 16)

[node name="Area_BlacksmithInterior" type="Node2D"]

[node name="Background" type="ColorRect" parent="."]
offset_right = 512.0
offset_bottom = 288.0
color = Color(0.25, 0.2, 0.18, 1)

[node name="Floor" type="ColorRect" parent="."]
offset_left = 20.0
offset_top = 60.0
offset_right = 492.0
offset_bottom = 268.0
color = Color(0.35, 0.28, 0.22, 1)

[node name="Props" type="Node2D" parent="."]

[node name="Forge" type="Sprite2D" parent="Props"]
position = Vector2(120, 90)
texture = ExtResource("7")

[node name="ForgeGlow" type="ColorRect" parent="Props/Forge"]
offset_left = -20.0
offset_top = 4.0
offset_right = 20.0
offset_bottom = 12.0
color = Color(1.0, 0.4, 0.1, 0.3)

[node name="Anvil" type="Sprite2D" parent="Props"]
position = Vector2(180, 120)
texture = ExtResource("8")

[node name="WeaponRack1" type="Sprite2D" parent="Props"]
position = Vector2(400, 90)
texture = ExtResource("9")

[node name="WeaponRack2" type="Sprite2D" parent="Props"]
position = Vector2(450, 90)
texture = ExtResource("9")

[node name="Workbench" type="Sprite2D" parent="Props"]
position = Vector2(300, 200)
texture = ExtResource("10")

[node name="ToolDisplay1" type="ColorRect" parent="Props"]
offset_left = 40.0
offset_top = 180.0
offset_right = 80.0
offset_bottom = 220.0
color = Color(0.45, 0.35, 0.25, 1)

[node name="Shelf" type="ColorRect" parent="Props/ToolDisplay1"]
offset_left = 2.0
offset_top = 10.0
offset_right = 38.0
offset_bottom = 14.0
color = Color(0.35, 0.25, 0.15, 1)

[node name="Hammer" type="ColorRect" parent="Props/ToolDisplay1"]
offset_left = 6.0
offset_top = 16.0
offset_right = 14.0
offset_bottom = 32.0
color = Color(0.5, 0.4, 0.3, 1)

[node name="Tongs" type="ColorRect" parent="Props/ToolDisplay1"]
offset_left = 18.0
offset_top = 16.0
offset_right = 26.0
offset_bottom = 34.0
color = Color(0.4, 0.4, 0.4, 1)

[node name="ToolDisplay2" type="ColorRect" parent="Props"]
offset_left = 40.0
offset_top = 230.0
offset_right = 80.0
offset_bottom = 260.0
color = Color(0.45, 0.35, 0.25, 1)

[node name="Chisel" type="ColorRect" parent="Props/ToolDisplay2"]
offset_left = 8.0
offset_top = 4.0
offset_right = 12.0
offset_bottom = 24.0
color = Color(0.6, 0.6, 0.6, 1)

[node name="File" type="ColorRect" parent="Props/ToolDisplay2"]
offset_left = 20.0
offset_top = 4.0
offset_right = 24.0
offset_bottom = 26.0
color = Color(0.5, 0.5, 0.5, 1)

[node name="Counter" type="ColorRect" parent="."]
offset_left = 350.0
offset_top = 180.0
offset_right = 480.0
offset_bottom = 210.0
color = Color(0.4, 0.3, 0.2, 1)

[node name="CounterTop" type="ColorRect" parent="Counter"]
offset_left = -2.0
offset_top = -4.0
offset_right = 132.0
offset_bottom = 4.0
color = Color(0.5, 0.4, 0.3, 1)

[node name="ForgeInteractable" type="Area2D" parent="."]
position = Vector2(120, 90)
script = ExtResource("3")
dialogue_text = "The forge glows with intense heat!
You can feel the warmth from here.
The blacksmith uses this to shape metal."

[node name="ForgeCollision" type="CollisionShape2D" parent="ForgeInteractable"]
shape = SubResource("RectangleShape2D_3")

[node name="AnvilInteractable" type="Area2D" parent="."]
position = Vector2(180, 120)
script = ExtResource("3")
dialogue_text = "A sturdy iron anvil.
You can see hammer marks from years of work.
This is where tools and weapons take shape."

[node name="AnvilCollision" type="CollisionShape2D" parent="AnvilInteractable"]
shape = SubResource("RectangleShape2D_3")

[node name="WeaponRackInteractable" type="Area2D" parent="."]
position = Vector2(425, 90)
script = ExtResource("3")
dialogue_text = "Swords, axes, and other weapons on display!
They gleam with expert craftsmanship.
Maybe one day you'll need one of these..."

[node name="WeaponRackCollision" type="CollisionShape2D" parent="WeaponRackInteractable"]
shape = SubResource("RectangleShape2D_3")

[node name="WorkbenchInteractable" type="Area2D" parent="."]
position = Vector2(300, 200)
script = ExtResource("3")
dialogue_text = "A workbench covered in tools and materials.
Half-finished projects sit waiting.
The blacksmith's skill is evident in every detail."

[node name="WorkbenchCollision" type="CollisionShape2D" parent="WorkbenchInteractable"]
shape = SubResource("RectangleShape2D_3")

[node name="ToolDisplayInteractable" type="Area2D" parent="."]
position = Vector2(60, 205)
script = ExtResource("3")
dialogue_text = "Adventure tools for sale!
Hammers, tongs, chisels, and files.
Everything an explorer might need."

[node name="ToolDisplayCollision" type="CollisionShape2D" parent="ToolDisplayInteractable"]
shape = SubResource("RectangleShape2D_3")

[node name="BlacksmithNPC" type="Area2D" parent="."]
position = Vector2(415, 165)
script = ExtResource("11")
dialogue_branches = ["Welcome to my forge! I'm Ironhammer.\nI craft the finest tools and weapons in Cloverhollow.\nWhat can I do for you today?", "The secret to good metalwork is patience.\nYou heat the metal, hammer it, cool it...\nRepeat until it's just right!", "These weapons aren't just for show.\nWhen you're ready for adventure, come back.\nI'll have something special forged for you.", "I've been smithing since I was your age.\nMy father taught me, and his father before him.\nIt's a proud tradition in our family.", "Need your gear upgraded? Not quite ready yet...\nBut soon I'll be offering special services!\nKeep collecting materials and come back!"]

[node name="BlacksmithSprite" type="Sprite2D" parent="BlacksmithNPC"]
texture = ExtResource("12")
centered = true

[node name="BlacksmithCollision" type="CollisionShape2D" parent="BlacksmithNPC"]
shape = SubResource("RectangleShape2D_3")

[node name="Spawns" type="Node2D" parent="."]

[node name="default" type="Marker2D" parent="Spawns"]
position = Vector2(256, 240)
script = ExtResource("5")

[node name="from_town_center" type="Marker2D" parent="Spawns"]
position = Vector2(256, 240)
script = ExtResource("5")
marker_id = "from_town_center"

[node name="TransitionToTownCenter" type="Area2D" parent="."]
position = Vector2(256, 270)
script = ExtResource("6")
target_area = "res://game/scenes/areas/Area_TownCenter.tscn"
target_spawn_id = "from_blacksmith"

[node name="TransitionShape" type="CollisionShape2D" parent="TransitionToTownCenter"]
shape = SubResource("RectangleShape2D_2")

[node name="TransitionLabel" type="Label" parent="TransitionToTownCenter"]
offset_left = -40.0
offset_top = -10.0
offset_right = 40.0
offset_bottom = 10.0
text = "Exit"
horizontal_alignment = 1

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(256, 240)
script = ExtResource("1")

[node name="Sprite" type="Sprite2D" parent="Player"]
texture = ExtResource("2")
centered = true

[node name="Collision" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_1")

[node name="Camera2D" type="Camera2D" parent="Player"]
enabled = true
position_smoothing_enabled = false

[node name="InteractionArea" type="Area2D" parent="Player"]

[node name="InteractionShape" type="CollisionShape2D" parent="Player/InteractionArea"]
shape = SubResource("CircleShape2D_1")

[node name="DialogueUI" parent="." instance=ExtResource("4")]
