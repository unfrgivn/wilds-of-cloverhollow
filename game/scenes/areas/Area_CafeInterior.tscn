[gd_scene load_steps=12 format=3]

[ext_resource type="Script" path="res://game/scripts/player/Player.gd" id="1"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/fae/overworld/fae_placeholder.png" id="2"]
[ext_resource type="Script" path="res://game/scripts/interaction/Interactable.gd" id="3"]
[ext_resource type="PackedScene" path="res://game/scenes/ui/DialogueUI.tscn" id="4"]
[ext_resource type="Script" path="res://game/scripts/areas/SpawnMarker.gd" id="5"]
[ext_resource type="Script" path="res://game/scripts/areas/AreaTransition.gd" id="6"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/sign.png" id="7"]
[ext_resource type="Script" path="res://game/scripts/interaction/NPCDialogueTree.gd" id="8"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/npcs/shopkeeper/shopkeeper.png" id="9"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1"]
size = Vector2(16, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_1"]
radius = 24.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2"]
size = Vector2(32, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3"]
size = Vector2(16, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4"]
size = Vector2(16, 16)

[node name="Area_CafeInterior" type="Node2D"]

[node name="Floor" type="ColorRect" parent="."]
offset_right = 512.0
offset_bottom = 288.0
color = Color(0.65, 0.50, 0.35, 1)

[node name="Walls" type="ColorRect" parent="."]
offset_right = 512.0
offset_bottom = 50.0
color = Color(0.85, 0.75, 0.60, 1)

[node name="WallTrim" type="ColorRect" parent="."]
offset_top = 48.0
offset_right = 512.0
offset_bottom = 52.0
color = Color(0.55, 0.40, 0.30, 1)

[node name="Props" type="Node2D" parent="."]

[node name="Counter" type="Node2D" parent="Props"]
position = Vector2(256, 90)

[node name="CounterBase" type="ColorRect" parent="Props/Counter"]
offset_left = -80.0
offset_top = -12.0
offset_right = 80.0
offset_bottom = 12.0
color = Color(0.55, 0.35, 0.25, 1)

[node name="CounterTop" type="ColorRect" parent="Props/Counter"]
offset_left = -82.0
offset_top = -14.0
offset_right = 82.0
offset_bottom = -10.0
color = Color(0.70, 0.50, 0.35, 1)

[node name="CounterCollision" type="StaticBody2D" parent="Props/Counter"]

[node name="Shape" type="CollisionShape2D" parent="Props/Counter/CounterCollision"]
shape = SubResource("RectangleShape2D_2")

[node name="DisplayCase" type="Node2D" parent="Props"]
position = Vector2(140, 90)

[node name="CaseBase" type="ColorRect" parent="Props/DisplayCase"]
offset_left = -24.0
offset_top = -16.0
offset_right = 24.0
offset_bottom = 16.0
color = Color(0.75, 0.65, 0.50, 1)

[node name="CaseGlass" type="ColorRect" parent="Props/DisplayCase"]
offset_left = -22.0
offset_top = -14.0
offset_right = 22.0
offset_bottom = 10.0
color = Color(0.80, 0.90, 0.95, 0.6)

[node name="Pastries" type="ColorRect" parent="Props/DisplayCase"]
offset_left = -18.0
offset_top = -4.0
offset_right = 18.0
offset_bottom = 6.0
color = Color(0.90, 0.70, 0.50, 1)

[node name="CashRegister" type="ColorRect" parent="Props"]
offset_left = 340.0
offset_top = 78.0
offset_right = 358.0
offset_bottom = 94.0
color = Color(0.35, 0.35, 0.40, 1)

[node name="Table1" type="Node2D" parent="Props"]
position = Vector2(100, 180)

[node name="TableTop" type="ColorRect" parent="Props/Table1"]
offset_left = -20.0
offset_top = -12.0
offset_right = 20.0
offset_bottom = 12.0
color = Color(0.70, 0.55, 0.40, 1)

[node name="Chair1" type="ColorRect" parent="Props/Table1"]
offset_left = -28.0
offset_top = -6.0
offset_right = -22.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="Chair2" type="ColorRect" parent="Props/Table1"]
offset_left = 22.0
offset_top = -6.0
offset_right = 28.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="Table2" type="Node2D" parent="Props"]
position = Vector2(256, 200)

[node name="TableTop" type="ColorRect" parent="Props/Table2"]
offset_left = -20.0
offset_top = -12.0
offset_right = 20.0
offset_bottom = 12.0
color = Color(0.70, 0.55, 0.40, 1)

[node name="Chair1" type="ColorRect" parent="Props/Table2"]
offset_left = -28.0
offset_top = -6.0
offset_right = -22.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="Chair2" type="ColorRect" parent="Props/Table2"]
offset_left = 22.0
offset_top = -6.0
offset_right = 28.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="Table3" type="Node2D" parent="Props"]
position = Vector2(412, 180)

[node name="TableTop" type="ColorRect" parent="Props/Table3"]
offset_left = -20.0
offset_top = -12.0
offset_right = 20.0
offset_bottom = 12.0
color = Color(0.70, 0.55, 0.40, 1)

[node name="Chair1" type="ColorRect" parent="Props/Table3"]
offset_left = -28.0
offset_top = -6.0
offset_right = -22.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="Chair2" type="ColorRect" parent="Props/Table3"]
offset_left = 22.0
offset_top = -6.0
offset_right = 28.0
offset_bottom = 6.0
color = Color(0.50, 0.35, 0.25, 1)

[node name="KitchenDoorway" type="Node2D" parent="Props"]
position = Vector2(450, 40)

[node name="DoorFrame" type="ColorRect" parent="Props/KitchenDoorway"]
offset_left = -24.0
offset_top = -20.0
offset_right = 24.0
offset_bottom = 20.0
color = Color(0.45, 0.30, 0.20, 1)

[node name="DoorInterior" type="ColorRect" parent="Props/KitchenDoorway"]
offset_left = -20.0
offset_top = -16.0
offset_right = 20.0
offset_bottom = 16.0
color = Color(0.25, 0.20, 0.18, 1)

[node name="KitchenSign" type="Label" parent="Props/KitchenDoorway"]
offset_left = -30.0
offset_top = -35.0
offset_right = 30.0
offset_bottom = -20.0
text = "Kitchen"
horizontal_alignment = 1

[node name="MenuBoard" type="ColorRect" parent="Props"]
offset_left = 60.0
offset_top = 20.0
offset_right = 110.0
offset_bottom = 48.0
color = Color(0.20, 0.15, 0.12, 1)

[node name="MenuText" type="Label" parent="Props/MenuBoard"]
offset_left = 2.0
offset_top = 2.0
offset_right = 48.0
offset_bottom = 26.0
text = "MENU"
horizontal_alignment = 1

[node name="Baker" type="Area2D" parent="."]
position = Vector2(350, 75)
script = ExtResource("8")
dialogue_branches = Array[String](["Welcome to Cloverhollow Café! I'm the baker here. Everything is made fresh daily!", "Our specialty is the Clover Cream Puff - it's a secret family recipe passed down for generations.", "I'm always experimenting with new recipes. Maybe someday I'll share some with you... if you help me gather the ingredients!", "The kitchen is where the magic happens! Fresh bread, pastries, and the best coffee in town."])

[node name="BakerSprite" type="Sprite2D" parent="Baker"]
texture = ExtResource("9")

[node name="BakerCollision" type="CollisionShape2D" parent="Baker"]
shape = SubResource("RectangleShape2D_4")

[node name="WelcomeSign" type="Area2D" parent="."]
position = Vector2(256, 140)
script = ExtResource("3")
dialogue_text = "Welcome to Cloverhollow Café!
Fresh pastries and warm drinks."

[node name="SignSprite" type="Sprite2D" parent="WelcomeSign"]
texture = ExtResource("7")

[node name="SignCollision" type="CollisionShape2D" parent="WelcomeSign"]
shape = SubResource("RectangleShape2D_3")

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(256, 240)
script = ExtResource("1")

[node name="Sprite" type="Sprite2D" parent="Player"]
texture = ExtResource("2")
centered = true

[node name="Collision" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_1")

[node name="Camera2D" type="Camera2D" parent="Player"]
enabled = true
position_smoothing_enabled = false

[node name="InteractionArea" type="Area2D" parent="Player"]

[node name="InteractionShape" type="CollisionShape2D" parent="Player/InteractionArea"]
shape = SubResource("CircleShape2D_1")

[node name="DialogueUI" parent="." instance=ExtResource("4")]

[node name="Spawns" type="Node2D" parent="."]

[node name="default" type="Marker2D" parent="Spawns"]
position = Vector2(256, 240)
script = ExtResource("5")

[node name="from_town_center" type="Marker2D" parent="Spawns"]
position = Vector2(256, 260)
script = ExtResource("5")
marker_id = "from_town_center"

[node name="TransitionToTownCenter" type="Area2D" parent="."]
position = Vector2(256, 280)
script = ExtResource("6")
target_area = "res://game/scenes/areas/Area_TownCenter.tscn"
target_spawn_id = "from_cafe"

[node name="TransitionShape" type="CollisionShape2D" parent="TransitionToTownCenter"]
shape = SubResource("RectangleShape2D_2")

[node name="TransitionLabel" type="Label" parent="TransitionToTownCenter"]
offset_left = -40.0
offset_top = -10.0
offset_right = 40.0
offset_bottom = 10.0
text = "↓ Exit"
horizontal_alignment = 1
