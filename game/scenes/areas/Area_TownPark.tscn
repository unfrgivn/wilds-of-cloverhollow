[gd_scene load_steps=15 format=3]

[ext_resource type="Script" path="res://game/scripts/player/Player.gd" id="1"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/fae/overworld/fae_placeholder.png" id="2"]
[ext_resource type="Script" path="res://game/scripts/interaction/Interactable.gd" id="3"]
[ext_resource type="PackedScene" path="res://game/scenes/ui/DialogueUI.tscn" id="4"]
[ext_resource type="Script" path="res://game/scripts/areas/SpawnMarker.gd" id="5"]
[ext_resource type="Script" path="res://game/scripts/areas/AreaTransition.gd" id="6"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/tree.png" id="7"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/flowers.png" id="8"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/bench.png" id="9"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/sign.png" id="10"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/props/lamp.png" id="11"]
[ext_resource type="Script" path="res://game/scripts/interaction/NPCDialogueTree.gd" id="12"]
[ext_resource type="Texture2D" path="res://game/assets/sprites/characters/npcs/shopkeeper/shopkeeper.png" id="13"]
[ext_resource type="Script" path="res://game/scripts/interaction/LostCatInteractable.gd" id="14"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1"]
size = Vector2(16, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_1"]
radius = 24.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2"]
size = Vector2(32, 48)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3"]
size = Vector2(16, 16)

[node name="Area_TownPark" type="Node2D"]

[node name="Background" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 512.0
offset_bottom = 288.0
color = Color(0.35, 0.70, 0.35, 1)

[node name="PathToTown" type="ColorRect" parent="."]
offset_left = 0.0
offset_top = 130.0
offset_right = 80.0
offset_bottom = 158.0
color = Color(0.54, 0.42, 0.25, 1)

[node name="PathToForest" type="ColorRect" parent="."]
offset_left = 432.0
offset_top = 130.0
offset_right = 512.0
offset_bottom = 158.0
color = Color(0.54, 0.42, 0.25, 1)

[node name="MainPath" type="ColorRect" parent="."]
offset_left = 60.0
offset_top = 130.0
offset_right = 452.0
offset_bottom = 158.0
color = Color(0.54, 0.42, 0.25, 1)

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(100, 144)
script = ExtResource("1")

[node name="Sprite" type="Sprite2D" parent="Player"]
texture = ExtResource("2")
centered = true

[node name="Collision" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_1")

[node name="Camera2D" type="Camera2D" parent="Player"]
enabled = true
position_smoothing_enabled = false

[node name="InteractionArea" type="Area2D" parent="Player"]

[node name="InteractionShape" type="CollisionShape2D" parent="Player/InteractionArea"]
shape = SubResource("CircleShape2D_1")

[node name="Trees" type="Node2D" parent="."]

[node name="Tree1" type="Sprite2D" parent="Trees"]
position = Vector2(50, 60)
texture = ExtResource("7")

[node name="Tree2" type="Sprite2D" parent="Trees"]
position = Vector2(120, 40)
texture = ExtResource("7")

[node name="Tree3" type="Sprite2D" parent="Trees"]
position = Vector2(200, 50)
texture = ExtResource("7")

[node name="Tree4" type="Sprite2D" parent="Trees"]
position = Vector2(400, 45)
texture = ExtResource("7")

[node name="Tree5" type="Sprite2D" parent="Trees"]
position = Vector2(470, 70)
texture = ExtResource("7")

[node name="Tree6" type="Sprite2D" parent="Trees"]
position = Vector2(50, 230)
texture = ExtResource("7")

[node name="Tree7" type="Sprite2D" parent="Trees"]
position = Vector2(130, 250)
texture = ExtResource("7")

[node name="Tree8" type="Sprite2D" parent="Trees"]
position = Vector2(380, 240)
texture = ExtResource("7")

[node name="Tree9" type="Sprite2D" parent="Trees"]
position = Vector2(460, 220)
texture = ExtResource("7")

[node name="Pond" type="Node2D" parent="."]

[node name="PondWater" type="ColorRect" parent="Pond"]
offset_left = 260.0
offset_top = 180.0
offset_right = 340.0
offset_bottom = 250.0
color = Color(0.27, 0.53, 0.80, 1)
z_index = -1

[node name="Bridge" type="ColorRect" parent="Pond"]
offset_left = 285.0
offset_top = 168.0
offset_right = 315.0
offset_bottom = 178.0
color = Color(0.55, 0.35, 0.17, 1)

[node name="FlowerBeds" type="Node2D" parent="."]

[node name="FlowerBed1" type="ColorRect" parent="FlowerBeds"]
offset_left = 152.0
offset_top = 82.0
offset_right = 168.0
offset_bottom = 98.0
color = Color(0.13, 0.55, 0.13, 1)

[node name="FlowerBed2" type="ColorRect" parent="FlowerBeds"]
offset_left = 172.0
offset_top = 87.0
offset_right = 188.0
offset_bottom = 103.0
color = Color(0.13, 0.55, 0.13, 1)

[node name="FlowerBed3" type="ColorRect" parent="FlowerBeds"]
offset_left = 332.0
offset_top = 77.0
offset_right = 348.0
offset_bottom = 93.0
color = Color(0.13, 0.55, 0.13, 1)

[node name="FlowerBed4" type="ColorRect" parent="FlowerBeds"]
offset_left = 352.0
offset_top = 82.0
offset_right = 368.0
offset_bottom = 98.0
color = Color(0.13, 0.55, 0.13, 1)

[node name="Flowers1" type="Sprite2D" parent="FlowerBeds"]
position = Vector2(160, 90)
texture = ExtResource("8")

[node name="Flowers2" type="Sprite2D" parent="FlowerBeds"]
position = Vector2(340, 85)
texture = ExtResource("8")

[node name="Flowers3" type="Sprite2D" parent="FlowerBeds"]
position = Vector2(180, 95)
texture = ExtResource("8")

[node name="Flowers4" type="Sprite2D" parent="FlowerBeds"]
position = Vector2(360, 90)
texture = ExtResource("8")

[node name="PicnicArea" type="Node2D" parent="."]

[node name="PicnicTable1" type="ColorRect" parent="PicnicArea"]
offset_left = 88.0
offset_top = 192.0
offset_right = 112.0
offset_bottom = 208.0
color = Color(0.55, 0.35, 0.17, 1)

[node name="PicnicTable2" type="ColorRect" parent="PicnicArea"]
offset_left = 128.0
offset_top = 202.0
offset_right = 152.0
offset_bottom = 218.0
color = Color(0.55, 0.35, 0.17, 1)

[node name="Bench1" type="Sprite2D" parent="PicnicArea"]
position = Vector2(220, 100)
texture = ExtResource("9")

[node name="ElderNPC" type="Area2D" parent="PicnicArea"]
position = Vector2(220, 92)
script = ExtResource("12")
dialogue_branches = Array[String](["Ah, young one! This park has been here since Cloverhollow was just a tiny village. I remember when Old Mayor Bramble planted those very trees...", "They say the forest to the east wasn't always so wild. Once, there was a path that led to an enchanted grove. But something changed it...", "If you're looking for adventure, keep your eyes open. Strange things have been happening in town lately. Shadows where there shouldn't be any...", "I hear tell there's someone causing mischief around here. Perhaps you could help the townsfolk? An old timer like me can only do so much these days."])

[node name="ElderSprite" type="Sprite2D" parent="PicnicArea/ElderNPC"]
texture = ExtResource("13")
centered = true

[node name="ElderCollision" type="CollisionShape2D" parent="PicnicArea/ElderNPC"]
shape = SubResource("RectangleShape2D_3")

[node name="Bench2" type="Sprite2D" parent="PicnicArea"]
position = Vector2(400, 100)
texture = ExtResource("9")

[node name="TrashCans" type="Node2D" parent="."]

[node name="TrashCan1" type="Sprite2D" parent="TrashCans"]
position = Vector2(230, 115)
texture = ExtResource("11")

[node name="TrashCan2" type="Sprite2D" parent="TrashCans"]
position = Vector2(390, 115)
texture = ExtResource("11")

[node name="ParkSign" type="Area2D" parent="."]
position = Vector2(80, 100)
script = ExtResource("3")
dialogue_text = "Cloverhollow Town Park
A peaceful place to relax and enjoy nature."

[node name="SignSprite" type="Sprite2D" parent="ParkSign"]
texture = ExtResource("10")

[node name="SignCollision" type="CollisionShape2D" parent="ParkSign"]
shape = SubResource("RectangleShape2D_3")

[node name="DialogueUI" parent="." instance=ExtResource("4")]

[node name="Spawns" type="Node2D" parent="."]

[node name="default" type="Marker2D" parent="Spawns"]
position = Vector2(100, 144)
script = ExtResource("5")

[node name="from_town_center" type="Marker2D" parent="Spawns"]
position = Vector2(50, 144)
script = ExtResource("5")
marker_id = "from_town_center"

[node name="from_forest" type="Marker2D" parent="Spawns"]
position = Vector2(470, 144)
script = ExtResource("5")
marker_id = "from_forest"

[node name="TransitionToTownCenter" type="Area2D" parent="."]
position = Vector2(10, 144)
script = ExtResource("6")
target_area = "res://game/scenes/areas/Area_TownCenter.tscn"
target_spawn_id = "from_park"

[node name="TransitionShape" type="CollisionShape2D" parent="TransitionToTownCenter"]
shape = SubResource("RectangleShape2D_2")

[node name="TransitionLabel" type="Label" parent="TransitionToTownCenter"]
offset_left = -40.0
offset_top = -30.0
offset_right = 40.0
offset_bottom = -10.0
text = "<- Town"
horizontal_alignment = 1

[node name="TransitionToForest" type="Area2D" parent="."]
position = Vector2(502, 144)
script = ExtResource("6")
target_area = "res://game/scenes/areas/Forest_Entrance.tscn"
target_spawn_id = "from_park"

[node name="TransitionShape" type="CollisionShape2D" parent="TransitionToForest"]
shape = SubResource("RectangleShape2D_2")

[node name="TransitionLabel" type="Label" parent="TransitionToForest"]
offset_left = -40.0
offset_top = -30.0
offset_right = 40.0
offset_bottom = -10.0
text = "Forest ->"
horizontal_alignment = 1

[node name="LostCat" type="Area2D" parent="."]
position = Vector2(380, 200)
script = ExtResource("14")
dialogue_found = "Meow! You found Whiskers!"
completion_flag = "found_mayors_cat"

[node name="Sprite2D" type="Sprite2D" parent="LostCat"]
texture = ExtResource("2")
scale = Vector2(0.5, 0.5)
modulate = Color(0.8, 0.6, 0.4, 1.0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="LostCat"]
shape = SubResource("RectangleShape2D_1")
