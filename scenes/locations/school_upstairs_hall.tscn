[gd_scene load_steps=11 format=3 uid="uid://cm5woan568jd3"]

[ext_resource type="PackedScene" path="res://scenes/player/Player.tscn" id="1_player"]
[ext_resource type="Script" uid="uid://d1karbxyqsu24" path="res://scripts/world/spawn_point.gd" id="2_spawn"]
[ext_resource type="Script" uid="uid://c3i6iyv6a1sqc" path="res://scripts/interactables/door.gd" id="3_door"]
[ext_resource type="Script" uid="uid://djpct1dcayo4u" path="res://scripts/interactables/sign.gd" id="4_sign"]
[ext_resource type="Texture2D" uid="uid://b8g8si66icu3m" path="res://assets/environments/school_upstairs_hall.jpg" id="5_bg"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_stairs_door"]
size = Vector2(175, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_homeroom_door"]
size = Vector2(80, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_art_door"]
size = Vector2(80, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_music_door"]
size = Vector2(80, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_prop"]
size = Vector2(60, 50)

[node name="SchoolHallSecondFloor" type="Node2D"]

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(704, 384)
texture = ExtResource("5_bg")

[node name="SpawnPoints" type="Node2D" parent="."]

[node name="FromStairs" type="Marker2D" parent="SpawnPoints"]
position = Vector2(200, 550)
script = ExtResource("2_spawn")
spawn_id = "from_stairs"

[node name="Default" type="Marker2D" parent="SpawnPoints"]
position = Vector2(700, 550)
script = ExtResource("2_spawn")
spawn_id = "default"

[node name="FromHomeroom" type="Marker2D" parent="SpawnPoints"]
position = Vector2(400, 480)
script = ExtResource("2_spawn")
spawn_id = "from_homeroom"

[node name="FromArt" type="Marker2D" parent="SpawnPoints"]
position = Vector2(700, 480)
script = ExtResource("2_spawn")
spawn_id = "from_art"

[node name="FromMusic" type="Marker2D" parent="SpawnPoints"]
position = Vector2(1000, 480)
script = ExtResource("2_spawn")
spawn_id = "from_music"

[node name="Player" parent="." instance=ExtResource("1_player")]
position = Vector2(700, 550)

[node name="Collisions" type="StaticBody2D" parent="."]

[node name="TopLeftWall" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(1052, 0, 1408, 0, 1339, 340, 1043, 257)

[node name="TopWall" type="CollisionPolygon2D" parent="Collisions"]
position = Vector2(-861, 153)
polygon = PackedVector2Array(1044, 61, 1917, -125, 1912, 105, 1332, 265, 1318, 307, 1040, 377)

[node name="BottomWall" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(363, 690, 413, 709, 1331, 414, 1352, 505, 366, 762)

[node name="LeftWall" type="CollisionPolygon2D" parent="Collisions"]
position = Vector2(83, -15)
polygon = PackedVector2Array(0, 0, 100, 0, 100, 768, 0, 768)

[node name="RightWall" type="CollisionPolygon2D" parent="Collisions"]
position = Vector2(20, -144)
polygon = PackedVector2Array(1308, 0, 1408, 0, 1408, 768, 1308, 768)

[node name="Interactables" type="Node2D" parent="."]

[node name="ToStairs" type="Area2D" parent="Interactables"]
position = Vector2(279, 644.99994)
rotation = 0.0344125
collision_layer = 2
script = ExtResource("3_door")
target_scene = "res://scenes/locations/school_stairwell.tscn"
spawn_id = "from_second_floor"
is_automatic = true

[node name="ToStairsCollision" type="CollisionShape2D" parent="Interactables/ToStairs"]
position = Vector2(-0.0344162, -0.9994135)
rotation = 0.37956923
shape = SubResource("RectangleShape2D_stairs_door")

[node name="HomeroomDoor" type="Area2D" parent="Interactables"]
position = Vector2(524, 406)
collision_layer = 2
script = ExtResource("3_door")
target_scene = "res://scenes/locations/school_homeroom.tscn"
spawn_id = "from_hall"

[node name="HomeroomDoorCollision" type="CollisionShape2D" parent="Interactables/HomeroomDoor"]
shape = SubResource("RectangleShape2D_homeroom_door")

[node name="ArtRoomDoor" type="Area2D" parent="Interactables"]
position = Vector2(762, 342)
collision_layer = 2
script = ExtResource("3_door")
target_scene = "res://scenes/locations/school_art_room.tscn"
spawn_id = "from_hall"

[node name="ArtDoorCollision" type="CollisionShape2D" parent="Interactables/ArtRoomDoor"]
shape = SubResource("RectangleShape2D_art_door")

[node name="MusicRoomDoor" type="Area2D" parent="Interactables"]
position = Vector2(991, 292)
collision_layer = 2
script = ExtResource("3_door")
target_scene = "res://scenes/locations/school_music_room.tscn"
spawn_id = "from_hall"

[node name="MusicDoorCollision" type="CollisionShape2D" parent="Interactables/MusicRoomDoor"]
shape = SubResource("RectangleShape2D_music_door")

[node name="Lockers" type="Area2D" parent="Interactables"]
position = Vector2(297, 493)
collision_layer = 2
script = ExtResource("4_sign")
sign_text = "Rows of second-floor lockers. Someone drew a little cat on locker #42."

[node name="LockersCollision" type="CollisionShape2D" parent="Interactables/Lockers"]
shape = SubResource("RectangleShape2D_prop")

[node name="BulletinBoard" type="Area2D" parent="Interactables"]
position = Vector2(875, 291)
collision_layer = 2
script = ExtResource("4_sign")
sign_text = "Art Club Wednesdays! Music Club Fridays! Join us!"

[node name="BulletinCollision" type="CollisionShape2D" parent="Interactables/BulletinBoard"]
shape = SubResource("RectangleShape2D_prop")

[node name="WaterFountain" type="Area2D" parent="Interactables"]
position = Vector2(650, 396)
collision_layer = 2
script = ExtResource("4_sign")
sign_text = "*glug glug* Refreshing! The water tastes faintly of copper."

[node name="FountainCollision" type="CollisionShape2D" parent="Interactables/WaterFountain"]
shape = SubResource("RectangleShape2D_prop")
