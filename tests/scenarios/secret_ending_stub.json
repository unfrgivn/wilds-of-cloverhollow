{
  "id": "secret_ending_stub",
  "name": "Secret Ending Conditions Stub Test",
  "description": "Tests secret ending condition tracking and ending type determination",
  "starting_area": "res://game/scenes/areas/Area_TownCenter.tscn",
  "actions": [
    {"type": "wait_frames", "count": 10},
    
    {"type": "check_secret_ending"},
    {"type": "check_secret_conditions"},
    
    {"type": "set_story_flag", "flag": "villain_revealed", "value": true},
    {"type": "set_story_flag", "flag": "chaos_origins_discovered", "value": true},
    {"type": "check_secret_ending"},
    
    {"type": "set_story_flag", "flag": "chaos_betrayal_learned", "value": true},
    {"type": "set_story_flag", "flag": "chaos_redemption_found", "value": true},
    {"type": "acquire_tool", "tool_id": "hope_pendant"},
    {"type": "check_hope_pendant"},
    {"type": "check_secret_ending"},
    
    {"type": "spare_villain"},
    {"type": "check_story_flag", "flag": "villain_spared"},
    {"type": "check_secret_ending"},
    {"type": "check_secret_conditions"},
    
    {"type": "capture", "label": "secret_ending_unlocked"},
    {"type": "wait_frames", "count": 5}
  ]
}
